@model Payment
@{
    ViewData["Title"] = "Tabung Masjid";
}

<section class="py-5 text-center container">
    <div class="row py-lg-5">
        <div class="col-lg-6 col-md-8 mx-auto">
            <h1 class="fw-light">Tabung Masjid</h1>
            <p class="lead text-body-secondary">Infaq harta anda hari ini!</p>
        </div>
    </div>
</section>

<div class="mb-4">
    <div class="card p-4">
        <figure class="p-3 mb-0">
            <blockquote class="blockquote" style="text-align:center;">
                <p>Apabila meninggalnya manusia itu, terputuslah segala amalannya melainkan tiga perkara iaitu sedekah jariah, ilmu yang bermanfaat atau anak soleh yang mendoakannya.</p>
            </blockquote>
            <figcaption class="blockquote-footer mb-0 text-body-secondary" style="text-align:center;">
                Hadith Riwayat <cite title="Source Title">Muslim</cite>
            </figcaption>
        </figure>
    </div>
</div>

@if (TempData.ContainsKey("CreateSuccessMessage"))
{
    <div class="alert alert-success" role="alert">
        @TempData["CreateSuccessMessage"]
    </div>
}

<div class="row mb-3 text-center">
    <div class="col-sm-8 mb-4">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title mb-4" style="text-align:center;">Ayuh Sedekah!</h5>
                <div style="text-align:justify;">
                    <form method="post" asp-action="Index">
                        <div class="form-group">
                            <label asp-for="paymentName">Nama</label>
                            <input asp-for="paymentName" class="form-control" placeholder="Isi nama anda">
                            <span asp-validation-for="paymentName" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="paymentEmail">Email</label>
                            <input asp-for="paymentEmail" class="form-control" placeholder="Isi email anda">
                            <span asp-validation-for="paymentEmail" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="paymentContact">Nombor Telefon</label>
                            <input asp-for="paymentContact" class="form-control" placeholder="Isi nombor telefon anda">
                            <span asp-validation-for="paymentContact" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="paymentAmount">Jumlah Bayaran</label>
                            <input asp-for="paymentAmount" class="form-control" placeholder="Isi jumlah bayaran anda">
                            <span asp-validation-for="paymentAmount" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label asp-for="paymentPurpose">Tujuan Bayaran</label>
                            <input asp-for="paymentPurpose" class="form-control" placeholder="Isi tujuan pembayaran anda">
                            <span asp-validation-for="paymentPurpose" class="text-danger"></span>
                        </div>
                        <div class="form-group">
                            <label for="paymentMethod">Pilih kaedah pembayaran:</label>
                            <select name="paymentMethod" id="paymentMethod" class="form-control">
                                <option value="" disabled selected hidden>Pilih kaedah pembayaran</option>
                                <option value="DuitNowQRPay">DuitNow QR Pay</option>
                                <option value="BankTransfer">Bank Transfer</option>
                                <option value="CardPayment">Kad Kredit/Debit</option>
                            </select>
                        </div>
                        <br />
                        <hr />
                        <br />
                        <div id="duitNowQRPayDetails" style="display: none;">
                            <!-- DuitNow QR Pay form fields -->
                            <div id="qrCodeContainer">
                                <img src="https://donate.sols247.org/wp-content/uploads/2022/01/duitnow-qr-code-sols247.png" alt="DuitNow QR Code" width="250" height="250" style="border:2px solid black">
                            </div>
                        </div>
                        <div id="bankTransferDetails" style="display: none;">
                            <!-- Bank Transfer form fields -->
                            <div class="form-group">
                                <label for="paymentBank">Pilih bank:</label>
                                <select name="paymentBank" id="paymentBank" class="form-control">
                                    <option value="" disabled selected hidden>Pilih bank</option>
                                    <option value="Bank Muamalat (M) Berhad">Bank Muamalat (M) Berhad</option>
                                    <option value="Malayan Banking Berhad (Maybank)">Malayan Banking Berhad (Maybank)</option>
                                    <option value="Bank Simpanan Nasional">Bank Simpanan Nasional</option>
                                    <option value="Affin Bank Berhad">Affin Bank Berhad</option>
                                    <option value="CIMB Bank Berhad">CIMB Bank Berhad</option>
                                    <option value="Bank Islam Malaysia Berhad">Bank Islam Malaysia Berhad</option>
                                    <option value="Public Bank Berhad">Public Bank Berhad</option>
                                    <option value="Alliance Bank Berhad">Alliance Bank Berhad</option>
                                    <option value="RHB Bank Berhad">RHB Bank Berhad</option>
                                    <option value="HSBC Bank Malaysia Berhad">HSBC Bank Malaysia Berhad</option>
                                    <option value="Bank Kerjasama Rakyat (Malaysia) Berhad">Bank Kerjasama Rakyat (Malaysia) Berhad</option>
                                    <option value="Hong Leong Bank Berhad">Hong Leong Bank Berhad</option>
                                    <option value="Agro Bank Berhad">Agro Bank Berhad</option>
                                </select>
                            </div>
                        <div id="cardPaymentDetails" style="display: none;">
                            <!-- Card Payment form fields -->
                            <div class="form-group">
                                <label asp-for="paymentCardNumber">Nombor Kad Kredit/Debit</label>
                                <input asp-for="paymentCardNumber" class="form-control" placeholder="Isi nombor kad kredit/debit anda">
                                <span asp-validation-for="paymentCardNumber" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="paymentCardCVC">CVC</label>
                                    <input asp-for="paymentCardCVC" class="form-control" placeholder="CVC">
                                <span asp-validation-for="paymentCardCVC" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                <label asp-for="paymentCardExpireMonth">Bulan Tamat Tempoh Kad</label>
                                <input asp-for="paymentCardExpireMonth" class="form-control" placeholder="Bulan">
                                <span asp-validation-for="paymentCardExpireMonth" class="text-danger"></span>
                            </div>
                            <div class="form-group">
                                    <label asp-for="paymentCardExpireYear">Tahun Tamat Tempoh Kad</label>
                                <input asp-for="paymentCardExpireYear" class="form-control" placeholder="Tahun">
                                <span asp-validation-for="paymentCardExpireYear" class="text-danger"></span>
                            </div>
                        </div>
                        <br />
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#confirmModal" id="paymentButton">Bayar</button>


                        <!-- Modal for confirmation -->
                        <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="confirmModalLabel">Sahkan Pembayaran</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <p>Anda akan melakukan pembayaran. Adakah anda pasti dengan segala perincian?</p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
                                        <button type="submit" class="btn btn-primary">Bayar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>

                    <script>
                        var paymentMethodSelect = document.getElementById("paymentMethod");
                        var duitNowQRPayDetails = document.getElementById("duitNowQRPayDetails");
                        var bankTransferDetails = document.getElementById("bankTransferDetails");
                        var cardPaymentDetails = document.getElementById("cardPaymentDetails");

                        paymentMethodSelect.addEventListener("change", function() {
                            var selectedValue = paymentMethodSelect.value;

                            // Reset all form details to hidden
                            duitNowQRPayDetails.style.display = "none";
                            bankTransferDetails.style.display = "none";
                            cardPaymentDetails.style.display = "none";

                            // Display the relevant form details based on the selected payment method
                            if (selectedValue === "DuitNowQRPay") {
                                duitNowQRPayDetails.style.display = "block";
                            } else if (selectedValue === "BankTransfer") {
                                bankTransferDetails.style.display = "block";
                            } else if (selectedValue === "CardPayment") {
                                cardPaymentDetails.style.display = "block";
                            }
                        });
                    </script>


                </div>
            </div>
        </div>
    </div>
</div>